@model FinancialPortal.ViewModels.BankAccountViewModel
@using FinancialPortal.Enums

@{
    ViewBag.Title = "Details";
}

<style>
    #button1 {
        background-color: #84a98c;
        border: solid;
        color: white;
        padding: 16px 32px;
        text-decoration: none;
        margin: 4px 2px;
        cursor: pointer;
    }

    #button2 {
        background-color: #84a98c;
        border: solid;
        color: white;
        padding: 16px 32px;
        text-decoration: none;
        margin: 4px 2px;
        cursor: pointer;
    }

    #button3 {
        background-color: #84a98c;
        border: solid;
        color: white;
        padding: 16px 32px;
        text-decoration: none;
        margin: 4px 2px;
        cursor: pointer;
    }

    #topbox {
        background-color: #84a98c;
        margin-top: 0px;
        margin-left: 0px !important;
        margin-right: 0px !important;
        border-bottom: 5px double white;
    }

    .small-box {
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        height: auto;
        background-color: #52796f;
        text-align: center;
        margin-bottom: 7.5px;
    }
</style>

<div class="container">
    <div class="row">
        <div class="col" id="topbox">
            <div style="background-color: #84a98c">
                <h1 style="font-size: 400%; text-align: center; color: #2f3e46">
                    <b>@Html.DisplayFor(model => model.BankAccount.AccountName)</b>
                </h1>
            </div>
        </div>

        @*<div class="col-md-2 pull-right">
            @Html.ActionLink("Create Budget", "Create", "Budgets", null, new { @id = "button2", @class = "btn" })
        </div>
        <div class="col-md-2 pull-right">
            @Html.ActionLink("Create Category", "Create", "BudgetItems", null, new { @id = "button3", @class = "btn" })
        </div>*@
    </div>
    <hr />
    <div class="row">
        <div class="col">
            <div class="small-box" style="background-color: #2f3e46">
                <div class="inner">
                    <h3>Add Budgets</h3>
                    <p style="color:#FFC9B9">
                        Create a monthly budget across Bank Accounts within your Household to ensure that you keep your spending below a certain threshold.
                    </p>
                </div>
                <div class="icon">
                    @*<i class="ion ion-person-add"></i>*@
                </div>
                @Html.ActionLink("Create Budget", "Create", "Budgets", null, new { @id = "button2", @class = "btn" })
                @*<a href="@Url.Action("Create", "Budgets")" class="small-box-footer"><b><i style="letter-spacing:2.5px">ADD</i></b> <i class="fas fa-arrow-circle-right"></i></a>*@
                @*<a href="#" data-toggle="modal" data-target="#joinHouseholdModal" class="small-box-footer"><b><i style="letter-spacing:2.5px">ADD</i></b> <i class="fas fa-arrow-circle-right"></i></a>*@
            </div>
        </div>
        <div class="col">
            <div class="small-box" style="background-color: #2f3e46">
                <div class="inner">
                    <h3>Add Categories</h3>
                    <p style="color:#FFC9B9">
                        Allocate the amount of money that you would like to designate toward categories each month. Such as food, gas, utilities, etc.
                    </p>

                </div>
                <div class="icon">
                    @*<i class="ion ion-pie-graph"></i>*@
                </div>
                @Html.ActionLink("Create Category", "Create", "BudgetItems", null, new { @id = "button3", @class = "btn" })
                @*<a href="@Url.Action("Create", "BudgetItems")" class="small-box-footer"><b><i style="letter-spacing:2.5px">ADD</i></b> <i class="fas fa-arrow-circle-right"></i></a>*@
                @*<a href="#" data-toggle="modal" data-target="#addBankAccountModal" class="small-box-footer"><b><i style="letter-spacing:2.5px">ADD</i></b><i class="fas fa-arrow-circle-right"></i></a>*@
            </div>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-lg-3 col-3">
            <div class="small-box elevation-2" style="background-color: #2f3e46; color: white">
                <div class="inner" style="text-align:center">
                    <dl>
                        <dt>
                            @Html.DisplayNameFor(model => model.BankAccount.CurrentBalance)
                        </dt>
                        <dd style="font-size:xx-large">
                            @if (Model.BankAccount.CurrentBalance >= 0)
                            {
                                <p style="font-size:xx-large; color:#84a98c"><b>$@Html.DisplayFor(model => model.BankAccount.CurrentBalance)</b></p>
                            }
                            else
                            {
                                <p style="color:#ff3926; font-size:xx-large"><b>[$@Html.DisplayFor(model => model.BankAccount.CurrentBalance)]</b></p>
                            }
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-3">
            <div class="small-box elevation-2" style="        background-color: #2f3e46;
        color: white">
                <div class="inner" style="text-align:center">
                    <dl>
                        <dt>
                            Monthly Spending
                        </dt>
                        <dd style="font-size:xx-large; color:#ff3926">
                            <b>[$-@Html.DisplayFor(model => model.MonthlySpending)]</b>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-3">
            <div class="small-box elevation-2" style="        background-color: #2f3e46;
        color: white">
                <div class="inner" style="text-align:center">
                    <dl>
                        <dt>
                            Monthly Deposits
                        </dt>
                        <dd style="font-size:xx-large; color:#84a98c">
                            <b>$@Html.DisplayFor(model => model.MonthlyDeposits)</b>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-3">
            <div class="small-box elevation-2" style="        background-color: #2f3e46;
        color: white">
                <div class="inner" style="text-align:center">
                    <dl>
                        <dt>
                            Monthly Transactions
                        </dt>
                        <dd style="font-size:xx-large">
                            <b>@Html.DisplayFor(model => model.MonthlyTransactions)</b>
                        </dd>
                    </dl>
                </div>
            </div>
        </div>
    </div>
    <hr />
    <div class="row">
        <div class="col-12">
            <div class="small-box elevation-2" style="        background-color: #52796f;
        color: white">

                @using (Html.BeginForm("Create", "Transactions", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    @Html.Hidden("Transaction.AccountId", Model.BankAccount.Id)
                    <br />
                    <div class="row">
                        <div class="col" style="text-align:center">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <b>Amount</b>
                                    @Html.Label("", htmlAttributes: new { @class = "control-label col-md-2" })
                                    <div class="col">
                                        @Html.EditorFor(model => model.Transaction.Amount, new { htmlAttributes = new { @class = "form-control" } })
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col" style="text-align:center">
                            <div class="form-group">
                                <b>Transaction Type</b>
                                @Html.Label("", htmlAttributes: new { @class = "control-label col-md-2" })
                                <div class="col">
                                    @Html.EnumDropDownListFor(model => model.Transaction.TransactionType, "Select Type", htmlAttributes: new { @class = "form-control" })
                                </div>
                            </div>
                        </div>
                        <div class="col" style="text-align:center">
                            <div class="form-group">
                                <b>Memo</b>
                                @Html.Label("", htmlAttributes: new { @class = "control-label col-md-2" })
                                <div class="col">
                                    @Html.EditorFor(model => model.Transaction.Memo, new { htmlAttributes = new { @class = "form-control" } })
                                </div>
                            </div>
                        </div>
                        <div class="col" style="text-align:center">
                            <div class="form-group">
                                <b>Category</b>
                                <div class="col">
                                    @Html.DropDownListFor(model => model.Transaction.BudgetItemId, Model.BudgetItemId, "Select Category", new { @class = "form-control" })
                                </div>
                            </div>
                        </div>
                        <div class="col" style="text-align:center">
                            <div class="form-group">
                                <div class="col">
                                    <input id="button1" type="submit" class="btn" value="ADD TRANSACTION" />
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="small-box elevation-2" style="        background-color: #84a98c;
        color: black">
                <div class="container">
                    <div class="row">
                        @*<div class="col-4">
                            <span style="text-align:center">
                                <h3 style="color:white"><b>Categories</b></h3>
                            </span>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>
                                            Budget
                                        </th>
                                        <th>
                                            Category
                                        </th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model.BankAccount.Transactions.OrderByDescending(c => c.Created))
                                    {
                                        <tr>
                                            @if (item.TransactionType == TransactionType.Withdrawal)
                                            {
                                                <td style="color:#ff3926">
                                                    [-@item.Amount.ToString("C")]
                                                </td>
                                            }
                                            else
                                            {
                                                <td style="color:#84a98c">
                                                    @item.Amount.ToString("C")
                                                </td>
                                            }
                                            <td>
                                                @Html.DisplayFor(modelItem => item.BudgetItem.ItemName)
                                            </td>
                                            <td>
                                                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                                                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>*@
                        <div class="col">

                            <span style="text-align:center">
                                <h3 style="color:white"><b>Transactions</b></h3>
                            </span>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>
                                            Amount
                                        </th>
                                        <th>
                                            Category
                                        </th>
                                        <th>
                                            Memo
                                        </th>
                                        <th>
                                            Date
                                        </th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model.BankAccount.Transactions.OrderByDescending(c => c.Created))
                                    {
                                        <tr>
                                            @if (item.TransactionType == TransactionType.Withdrawal)
                                            {
                                                <td style="color:#ff3926">
                                                    [-@item.Amount.ToString("C")]
                                                </td>
                                            }
                                            else
                                            {
                                                <td style="color:#84a98c">
                                                    @item.Amount.ToString("C")
                                                </td>
                                            }
                                            <td>
                                                @Html.DisplayFor(modelItem => item.BudgetItem.ItemName)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Memo)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.Created)
                                            </td>
                                            <td>
                                                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                                                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div>
    @*<dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.Household.HouseholdName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Household.HouseholdName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Owner.FirstName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Owner.FirstName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.AccountName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.AccountName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Created)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Created)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.StartingBalance)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.StartingBalance)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.CurrentBalance)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.CurrentBalance)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.WarningBalance)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.WarningBalance)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.IsDeleted)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.IsDeleted)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.AccountType)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.AccountType)
            </dd>

        </dl>*@
</div>
<p>
    @*@Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |*@
    @Html.ActionLink("Back to List", "Index")
</p>
